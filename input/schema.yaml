# SPDX-FileCopyrightText: 2025 German Aerospace Center <amiris@dlr.de>
#
# SPDX-License-Identifier: Apache-2.0
JavaPackages:
  Agents:
    - "agents"
  DataItems:
    - "communications.message"
  Portables:
    - "communications"
    - "agents"
    - "de.dlr.gitlab.fame.time"

AgentTypes:
  DayAheadMarketSingleZone:
    Attributes:
      Clearing: &DAM_G_Clearing
        AttributeType: block
        List: false
        Mandatory: true
        MetaData:
          Description: "Group of market clearing specifications"
        NestedAttributes:
          DistributionMethod:
            AttributeType: enum
            Mandatory: true
            List: false
            MetaData:
              Description: "Energy assignment strategy for price-setting bids with the same price"
            Values:
              SAME_SHARES:
                MetaData:
                  Description: "Bids with the same price are all awarded their same relative share."
              FIRST_COME_FIRST_SERVE:
                MetaData:
                  Description: "Bids are awarded in the order they appear after sorting the order book. Discouraged!"
              RANDOMIZE:
                MetaData:
                  Description: "Bids with the same price are awarded in a random order."
          ShortagePriceMethod:
            AttributeType: enum
            Mandatory: false
            List: false
            help: "Defines which price to use in case of shortage events (default: ScarcityPrice)"
            MetaData:
              Description: "Which price to use in case of scarcity (i.e. when valuable demand is shed due to missing capacity)"
            Values:
              LastSupplyPrice:
                MetaData:
                  Description: "The market price is capped at the highest supply bid."
              ValueOfLostLoad:
                MetaData:
                  Description: "The energy price on a market with scarcity equals the maximum allowed price (scarcity price)."
      GateClosureInfoOffsetInSeconds: &DAM_A_GateClosureInfoOffset
        AttributeType: integer
        List: false
        Mandatory: true
        MetaData:
          Description: "Time delay between sending out GateClosureInfo and actual market clearing."
    Products:
      Awards: &DAM_P_Awards
        MetaData:
          Description: "Awarded energy and price per bidding trader."
          OEONearestConcept: OEO_00140122
      GateClosureInfo: &DAM_P_GateClosureInfo
        MetaData:
          Description: "Information on when the market clearing is performed."
    Outputs:
      TotalAwardedPowerInMW: &DAM_O_TotalAwardedPower
        MetaData:
          Description: "The total amount of power in MW awarded."
          OEONearestConcept: OEO_00140122
      ElectricityPriceInEURperMWH: &DAM_O_ElectricityPrice
        MetaData:
          Description: "The electricity price in Euro per MWH."
          OEONearestConcept: OEO_00020117
      DispatchSystemCostInEUR: &DAM_O_DispatchSystemCost
        MetaData:
          Description: "The dispatch cost in Euro."
          OEONearestConcept: OEO_00020116
    MetaData:
      Description: "The energy exchange represents the day-ahead energy market with one clearing per time segment (typically hourly clearing). It digests the requested and offered energy from connected Traders, finds a uniform market uniform clearing price, and returns the price and their specific awarded energy to the Traders."
      OEONearestConcept: OEO_00020065

  DayAheadMarketMultiZone:
    Attributes:
      Clearing: *DAM_G_Clearing
      MarketZone: &DAM_A_MarketZone
        AttributeType: string_set
        Mandatory: false
        List: false
        help: "Identifier specifying the market zone this DayAheadMarket is representing"
        MetaData:
          Description: "Identifier specifying the market zone of the DayAheadMarket"
      Transmission: &DAM_G_Transmission
        AttributeType: block
        List: true
        Mandatory: false
        MetaData:
          Description: "Transmission capacities towards connected market zones"
        NestedAttributes:
          MarketZone:
            AttributeType: string_set
            List: false
            Mandatory: true
            help: "Connected market zone that can be supplied with additional energy"
            MetaData:
              Description: "Connected Market zone that can be supplied with additional energy"
          CapacityInMW:
            AttributeType: time_series
            List: false
            Mandatory: true
            help: "Net transfer capacity of supply from own to connected market zone"
            MetaData:
              Description: "Net transfer capacity of supply from own to connected market zone"
      GateClosureInfoOffsetInSeconds: *DAM_A_GateClosureInfoOffset
    Products:
      TransmissionAndBids: &DAM_P_TransmissionAndBids
        MetaData:
          Description: "Transmission capacities and bids from exchange in local market zone."
      Awards: *DAM_P_Awards
      GateClosureInfo: *DAM_P_GateClosureInfo
    Outputs:
      TotalAwardedPowerInMW: *DAM_O_TotalAwardedPower
      ElectricityPriceInEURperMWH: *DAM_O_ElectricityPrice
      DispatchSystemCostInEUR: *DAM_O_DispatchSystemCost
      PreCouplingElectricityPriceInEURperMWH:
        MetaData:
          Description: "Electricity price which would occur without any market coupling in EUR/MWh"
      PreCouplingTotalAwardedPowerInMW:
        MetaData:
          Description: "Awarded power without any market coupling in MW"
      PreCouplingDispatchSystemCostInEUR:
        MetaData:
          Description: "System cost without any market coupling in EUR"
      AwardedNetEnergyFromImportInMWH:
        MetaData:
          Description: "Net awarded power from imports in MWh"
      AwardedNetEnergyToExportInMWH:
        MetaData:
          Description: "Net awarded energy to export in MWh"
    MetaData:
      Description: "The energy exchange performs local market clearing for a single day-ahead energy market in a cluster of coupled market zones."
      OEONearestConcept: OEO_00020069

  MarketCoupling:
    Attributes:
      MinimumDemandOffsetInMWH:
        AttributeType: double
        Mandatory: false
        List: false
        help: "Offset added to the demand shift that ensures a price change at the involved markets."
        MetaData:
          Description: "This offset is added to the demand shift to ensures a price change at the involved markets."
    Products:
      MarketCouplingResult:
        MetaData:
          Description: "Result of the coupled market clearing"
    Outputs:
      AvailableTransferCapacityInMWH:
        MetaData:
          Description: "Complex output; the capacity available for transfer between two markets in MWH"
      UsedTransferCapacityInMWH:
        MetaData:
          Description: "Complex output; the actual used transfer capacity between two markets in MWH"
    MetaData:
      Description: "Couples different markets. It receives merit orders from individual EnergyExchange(s). It computes coupled electricity prices aiming at minimising price differences between markets. Sends individual, coupled prices back to client EnergyExchanges."
      OEONearestConcept: OEO_00020069

  ImportTrader:
    Attributes:
      Imports:
        AttributeType: block
        List: true
        Mandatory: true
        MetaData:
          Description: "List of import timeseries with associated prices."
        NestedAttributes:
          AvailableEnergyForImport:
            AttributeType: time_series
            Mandatory: true
            List: false
            help: "Amount of Energy from imports to be offered at energy exchange in MW"
            MetaData:
              Description: "Amount of Energy from imports to be offered at energy exchange in MW"
          ImportCostInEURperMWH:
            AttributeType: time_series
            Mandatory: true
            List: false
            help: "Costs at which imports are offered at energy exchange in EUR/MWh"
            MetaData:
              Description: "Costs at which imports are offered at energy exchange in EUR/MWh"
    Products:
      Bids: &DamTrader_P_Bids
        MetaData:
          Description: "Sell or Buy orders to be placed at the associated DayAheadMarket"
      BidsForecast: &Trader_P_BidsForecast
        MetaData:
          Description: "A forecast of the own bids to be placed at later times at the associated DayAheadMarket"
    Outputs:
      OfferedEnergyInMWH: &DamTrader_O_OfferedEnergy
        MetaData:
          Description: "Energy offered to energy exchange in MWh"
      AwardedEnergyInMWH: &DamTrader_O_AwardedEnergy
        MetaData:
          Description: "Energy awarded by energy exchange in MWh"
      RequestedEnergyInMWH: &DamTrader_O_RequestedEnergy
        MetaData:
          Description: "Energy requested at energy exchange in MWh"
    MetaData:
      Description: "The ImportTrader offers imported energy at the day-ahead-market according to given energy import as supply."
      OEONearestConcept: OEO_00040005

  CarbonMarket:
    Attributes:
      Co2Prices:
        AttributeType: time_series
        Mandatory: false
        List: false
        MetaData:
          Description: "The CO2 price. It is an exogenously defined price time series."
          OEONearestConcept: OEO_00010269
      OperationMode:
        AttributeType: enum
        Mandatory: true
        List: false
        Values:
          FIXED:
            MetaData:
              Description: "CO2 prices are read from file - actual emissions create no feedback on the CO2 price."
          DYNAMIC:
            MetaData:
              Description: "CO2 prices are determined based on the sum of CO2 emissions and a CO2 cap read from file."
        MetaData:
          Description: "Mode of operation of CarbonMarket."
    Products:
      Co2PriceForecast:
        MetaData:
          Description: "Co2 price forecast."
      Co2Price:
        MetaData:
          Description: "Co2 price."
          OEONearestConcept: OEO_00010269
      CertificateBill:
        MetaData:
          Description: "Costs for ordered CO2-certificates."
    Outputs:
      Co2EmissionsInTons:
        MetaData:
          Description: "Registered CO2 emissions in tons"
      Co2PriceInEURperTon:
        MetaData:
          Description: "CO2 price in EUR per ton"
    MetaData:
      Description: "The CarbonMarket sells CO2 emission allowances, determines their prices and accounts for total quantity of sold CO2 allowances."
      OEONearestConcept: OEO_00020075

  FuelsMarket:
    Attributes:
      FuelPrices:
        AttributeType: block
        List: true
        Mandatory: true
        MetaData:
          Description: "Price timeseries for different fuels"
        NestedAttributes:
          FuelType: &FuelsTrader_A_FuelType
            AttributeType: string_set
            List: false
            Mandatory: true
            MetaData:
              Description: "Type of fuel"
          Price:
            AttributeType: time_series
            List: false
            Mandatory: true
            MetaData:
              Description: "Fuel price"
              OEONearestConcept: OEO_00040003
          ConversionFactor:
            AttributeType: double
            List: false
            Mandatory: true
            MetaData:
              Description: "For the associated fuel price time series to €/Thermal_MWh (in case the fuel price is given in another unit). Example: if the fuel price is given in k€/Thermal_MWh, the conversion factor needs to be set to 1000."
    Products:
      FuelPriceForecast:
        MetaData:
          Description: "Forecasted value of a fuel price"
      FuelPrice:
        MetaData:
          Description: "Fuel price"
          OEONearestConcept: OEO_00040003
      FuelBill:
        MetaData:
          Description: "Sum of costs for purchased fuel"
          OEONearestConcept: OEO_00040003
    Outputs: []
    MetaData:
      Description: "FuelsMarket determines market prices for power plant fuels. These may be conventional fuels or others (e.g. Biogas). So far, FuelsMarket does not apply any market mechanisms to create fuel prices, but provides fuel price data from configured TimeSeries."
      OEONearestConcept: OEO_00020060

  SupportPolicy:
    Attributes:
      SetSupportData:
        AttributeType: block
        Mandatory: true
        List: true
        MetaData:
          Description: "Definitions for support instruments"
          OEONearestConcept: OEO_00010456
        NestedAttributes:
          PolicySet:
            AttributeType: string_set
            Mandatory: true
            List: false
            MetaData:
              Description: "Sets for energy-carrier-specific remuneration"
          FIT:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              TsFit:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "A feed-in-tariff (FIT) timeseries."
                  OEONearestConcept: OEO_00020108
            MetaData:
              Description: "A feed-in-tariff (FIT)."
              OEONearestConcept: OEO_00020108
          MPVAR:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              Lcoe:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "A group for a TechnologySet holding the specific MPVAR information."
                  OEONearestConcept: OEO_00020127
            MetaData:
              Description:
              OEONearestConcept: OEO_00020109
          MPFIX:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              Premium:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "A group for a TechnologySet holding the specific MPFIX information."
                  OEONearestConcept: OEO_00020109
            MetaData:
              Description:
          CFD:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              Lcoe:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "A TimeSeries with the Lcoe used as the value to be applied in a variable ex post market premium scheme given in EUR/MWh."
            MetaData:
              Description: "A group for a TechnologySet holding the specific CFD information."
          CP:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              Premium:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "A TimeSeries with the Premium used as the value of the fixed market premium in a fixed market premium scheme given in EUR/MWh."
            MetaData:
              Description: "A group for a TechnologySet holding the specific CP information."
          FINANCIAL_CFD:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              Premium:
                AttributeType: time_series
                Mandatory: true
                List: false
              ReferenceYieldProfile:
                AttributeType: time_series
                Mandatory: true
                List: false
                help: "Yield profile of the reference plant to calculate payback obligation from its market revenues"
                MetaData:
                  Description: "A TimeSeries with the Premium used as yield profile of the reference plant to calculate payback obligation from its market revenues given in EUR/MWh."
    Products:
      SupportInfo:
        MetaData:
          Description: "Info on the support scheme to be applied to a set of plants."
      SupportPayout:
        MetaData:
          Description: "Actual pay-out of the support."
      MarketValueCalculation:
        MetaData:
          Description: "Trigger for market value calculation - not send to anyone."
    Outputs:
      MarketValueInEURperMWH:
        MetaData:
          Description: "Market values per energy carrier and evaluation interval"
    MetaData:
      Description: "SupportPolicy administers support payments for renewable generators. Payments are made to an AggregatorTrader who passes them to a RenewablePlantOperator. Current support policies are a feed-in tariff (FIT), a variable market premium (MPVAR), a fixed market premium (MPFIX), contracts for differences (CFD), and a capacity premium (CP)."
      OEONearestConcept: OEO_00010456

  HydrogenSupportPolicy:
    Attributes:
      SetSupportData:
        AttributeType: block
        Mandatory: true
        List: true
        MetaData:
          Description: "Definitions for support instruments"
          OEONearestConcept: OEO_00010456
        NestedAttributes:
          HydrogenPolicySet: &HydrogenSupportPolicy_A_HydrogenPolicySet
            AttributeType: string_set
            Mandatory: true
            List: false
            MetaData:
              Description: "Set for hydrogen remuneration"
          MPFIX:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "A group for a TechnologySet holding the specific MPFIX information."
              OEONearestConcept: OEO_00020109
            NestedAttributes:
              Premium:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "A premium"
                  OEONearestConcept: OEO_00020109
    Products:
      SupportInfo:
        MetaData:
          Description: "Info on the support scheme to be applied to a set of clients."
      SupportPayout:
        MetaData:
          Description: "Actual pay-out of the support."
    MetaData:
      Description: "HydrogenSupportPolicy administers support payments for hydrogen. Payments are made to a HydrogenSupportClient. Current support policies are fixed market premium (MPFIX)."
      OEONearestConcept: OEO_00010456


  DemandTrader:
    Attributes:
      Loads:
        AttributeType: block
        List: true
        Mandatory: true
        NestedAttributes:
          DemandSeries:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "A time series that contains demand values in each simulated time step."
              OEONearestConcept: OEO_00030034
          ValueOfLostLoad:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The price at which the demand is offered, i.e. maximum willingness to pay for the assiciated energy."
        MetaData:
          Description: "List demand timeseries and their associated value of lost load"
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
    MetaData:
      Description: "DemandTrader is a Trader, which is responsible for purchasing the electricity demand at the EnergyExchange."
      OEONearestConcept: OEO_00140140

  ConventionalTrader:
    Attributes:
      minMarkup:
        AttributeType: double
        Mandatory: false
        List: false
        MetaData:
          Description: "Is the lower bound of the interpolation for changes to the marginal costs (default=0)"
          OEONearestConcept: OEO_00020076
      maxMarkup:
        AttributeType: double
        Mandatory: false
        List: false
        MetaData:
          Description: "Is the upper bound of the interpolation for changes to the marginal costs (default=0)"
          OEONearestConcept: OEO_00020076
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      Payout: &PowerPlantScheduler_P_Payout
        MetaData:
          Description: "Pay out of the contracted plant or flexibility portfolio operator."
      DispatchAssignment: &PowerPlantScheduler_P_DispatchAssignment
        MetaData:
          Description: "The dispatch assignment for the plant / flexibility portfolio operators."
          OEONearestConcept: OEO_00140136
      GateClosureForward: &TraderWithClients_P_GateClosureForward
        MetaData:
          Description: "Forwarded bidding times request from EnergyExchange."
      ForecastRequestForward: &TraderWithClients_P_ForecastRequestForward
        MetaData:
          Description: "Forwarded forecasting times request from MarketForecaster."
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
    MetaData:
      Description: "The ConventionalTrader is a Trader that sells energy from ConventionalPlantOperators at the EnergyExchange. Bids are calculated based on available capacities of its linked power plants, their MarginalCosts and possible mark-ups or mark-downs. Finally, the bids are forwarded to the exchange and the awarded bids get allocated to the associated power plants."
      OEONearestConcept: OEO_00140131

  StorageTrader:
    Attributes:
      Refinancing: &AnnualCostCalculator_G_Refinancing
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
          Description: "Refinancing specifications"
        NestedAttributes:
          InvestmentExpensesInEURperMW:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "Investment expenses in EUR/MW."
          AnnuityFactor:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "The annuity factor."
          AnnualFixedCostsInEURperMW:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "The annual fixed costs in EUR/MW."
      Device: &Device_G_Device
        AttributeType: block
        Mandatory: true
        List: false
        NestedAttributes:
          EnergyToPowerRatio: &Device_A_EnergyToPowerRatio
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The duration that a storage device can operate while delivering its rated output."
          SelfDischargeRatePerHour: &Device_A_SelfDischargeRatePerHour
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Measure of the rate at which a battery is discharged per hour."
          ChargingEfficiency: &Device_A_ChargingEfficiency
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The efficiency with which a storage device charges."
              OEONearestConcept: OEO_00140050
          DischargingEfficiency: &Device_A_DischargingEfficiency
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The efficiency with which a storage device discharges."
              OEONearestConcept: OEO_00140050
          InitialEnergyLevelInMWH: &Device_A_InitialEnergyLevelInMWH
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The initial level of charge in MWH."
          InstalledPowerInMW: &Device_A_InstalledPowerInMW
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "TimeSeries of total peak production capacity."
        MetaData:
          Description: "Technical details of the storage device to administrate."
      Strategy:
        AttributeType: block
        Mandatory: true
        List: false
        NestedAttributes:
          StrategistType:
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              SINGLE_AGENT_MIN_SYSTEM_COST:
                MetaData:
                  Description: "Uses the storage device in order to minimise the total system cost. Full information is used to consider marginal cost of the bids instead of the bidding price itself which maybe distorted with mark-ups and mark-downs."
              DISPATCH_FILE:
                MetaData:
                  Description: "Creates a DispatchSchedule following a given TimeSeries read from input file. It can provide forecasts regarding its behaviour."
              SINGLE_AGENT_MAX_PROFIT:
                MetaData:
                  Description: "Uses the storage device in order to maximise the agent's profit."
              MULTI_AGENT_MEDIAN:
                MetaData:
                  Description: "Creates dispatch schedules based on a price interval and price median. This can be used on multiple storage agents in the same simulation."
              MAX_PROFIT_PRICE_TAKER:
                MetaData:
                  Description: "Creates dispatch schedules aiming to optimize own profits without considering own price impact."
            MetaData:
              Description: "Declares the Strategist to be used for Bid calculation. Possible types are DISPATCH_FILE, SINGLE_AGENT_MIN_SYSTEM_COST, SINGLE_AGENT_MAX_PROFIT and MULTI_AGENT_SIMPLE."
          ForecastPeriodInHours: &Strategist_A_ForecastPeriod
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of hours to the future at which the forecast is available. Must be smaller or equal to that of the MarketForecaster."
          ScheduleDurationInHours: &Strategist_A_ScheduleDuration
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of hours each created schedule is viable - should at least match (better: significantly larger than) E2P ratio of the Device."
              OEONearestConcept: OEO_00030035
          BidToleranceInEURperMWH: &Strategist_A_BidTolerance
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "Tolerance value added or subtracted from each calculated bid in EUR/MWh."
          ForecastUpdateType: &Strategist_A_ForecastUpdateType
            AttributeType: enum
            Mandatory: false
            List: false
            Values:
              ALL:
                MetaData:
                  Description: "Forecasts are requested for all time steps, discarding previously received electricity price forecasts."
              INCREMENTAL:
                MetaData:
                  Description: "Forecasts are only requested for missing time steps, therefore updated incrementally."
            MetaData:
              Description: "Defines the mode of requesting electricity price forecasts (default='INCREMENTAL')"
          SingleAgent:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              ModelledChargingSteps:
                AttributeType: integer
                Mandatory: false
                List: false
                MetaData:
                  Description: "Number of charging steps (per E2P) that is used to discretize the storage's state of charge (SOC)."
          MultiAgent:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              AssessmentFunctionPrefactors:
                AttributeType: double
                Mandatory: false
                List: true
                help: "Prefactors `a`,`b`,`c`, ... of a polynomial `a + bx + cx² + ...`, where `x` is the difference between the hourly price and the price median. Higher prefactors favour (dis-)charge at more extreme prices."
                MetaData:
                  Description: "Prefactors `a`,`b`,`c`, ... of a polynomial `a + bx + cx² + ...`, where `x` is the difference between the hourly price and the price median. Higher prefactors favour (dis-)charge at more extreme prices."
          FixedDispatch:
            AttributeType: block
            Mandatory: false
            List: false
            NestedAttributes:
              Schedule:
                AttributeType: time_series
                Mandatory: false
                List: false
                help: "Change of internal storage energy relative to available charging power. Values should be -1 <= x <= 1."
          DispatchToleranceInMWH:
                AttributeType: double
                Mandatory: false
                List: false
                help: "Accepted tolerance for dispatch deviations in MWh."
                MetaData:
                  Description: "Accepted tolerance for dispatch deviations in MWh."
        MetaData:
          Description: "Group of parameters to describe the dispatch strategy for the storage device."
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      MeritOrderForecastRequest: &ForecastClient_P_MeritOrderForecastRequest
        MetaData:
          Description: "Requests for merit-order forecasts"
      PriceForecastRequest: &ForecastClient_P_PriceForecastRequest
        MetaData:
          Description: "Requests for price-forecasts"
      AnnualCostReport: &FlexibilityTrader_P_AnnualCostReport
        MetaData:
          Description: "Report annual costs (not sent to other agents, but calculated within an agent)"
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      FixedCostsInEUR: &FlexibilityTrader_O_FixedCosts
        MetaData:
          Description: "Fixed operation and maintenance costs in EUR"
      InvestmentAnnuityInEUR: &FlexibilityTrader_O_InvestmentAnnuity
        MetaData:
          Description: "Investment annuity in EUR"
      VariableCostsInEUR: &FlexibilityTrader_O_VariableCosts
        MetaData:
          Description: "Variable operation and maintenance costs in EUR"
      ReceivedMoneyInEUR: &FlexibilityTrader_O_ReceivedMoney
        MetaData:
          Description: "Total received money in EUR"
      OfferedChargePriceInEURperMWH:
        MetaData:
          Description: "Offered price for charging in EUR per MWh"
      OfferedDischargePriceInEURperMWH:
        MetaData:
          Description: "Offered price for discharging in EUR per MWh"
      AwardedChargeEnergyInMWH:
        MetaData:
          Description: "Total amount of charge energy awarded in MWh"
      AwardedDischargeEnergyInMWH:
        MetaData:
          Description: "Total amount of discharge energy awarded in MWh"
      StoredEnergyInMWH:
        MetaData:
          Description: "Amount of energy in storage in MWh after executing (dis-)charging actions in the current time step"
    MetaData:
      Description: "The StorageTrader uses a storage device to trade electricity at the energy exchange. Different dispatch strategies can be used to fulfil different targets, e.g. to maximise profits or to minimise system cost. Depending on its strategy, the StorageTrader might require (or contribute to) forecasts for price or merit order."
      OEONearestConcept: OEO_00040005

  RenewableTrader:
    Attributes:
      ShareOfRevenues:
        AttributeType: double
        Mandatory: true
        List: false
        MetaData:
          Description: "The share of the market revenues the RenewableTrader may keep, must be between 0 and 1."
          OEONearestConcept: OEO_00020128
      ForecastError: &AggregatorTrader_G_ForecastError
        AttributeType: block
        List: false
        Mandatory: false
        MetaData:
          Description: "Group of parameters to specify potential forecast errors."
        NestedAttributes:
          Mean:
            AttributeType: double
            Mandatory: false
            List: false
            help: "Relative offset of the power forecasts"
            MetaData:
              Description: "The normalised mean value of a normally distributed error (positive value means an overestimation of feed-in potentials)."
          StandardDeviation:
            AttributeType: double
            Mandatory: false
            List: false
            help: "Standard deviation of the relative power forecasting errors"
            MetaData:
              Description: "Standard deviation of the relative power forecasting errors."
      MarketValueForecastMethod:
        AttributeType: enum
        List: false
        Mandatory: false
        MetaData:
          Description: "Choose upon the method to forecast the market value of associated energy carriers."
        Values:
          PREVIOUS_MONTH:
            MetaData:
              Description: "Forecast from previous month."
          FROM_FILE:
            MetaData:
              Description: "Forecast from file."
      MarketValueForecasts:
        AttributeType: block
        List: true
        Mandatory: false
        NestedAttributes:
          EnergyCarrier: &RenewableTrader_A_EnergyCarrier
            AttributeType: enum
            Mandatory: true
            List: false
            MetaData:
              Description: "Energy carrier as used in the context of energy policy (not necessarily a physical energy carrier)."
            Values: &SupportPolicy_V_EnergyCarrier
              PV:
                MetaData:
                  Description: "PV"
              WindOn:
                MetaData:
                  Description: "Wind onshore"
              WindOff:
                MetaData:
                  Description: "Wind offshore"
              RunOfRiver:
                MetaData:
                  Description: "Run of river"
              Biogas:
                MetaData:
                  Description: "Biogas"
              Other:
                MetaData:
                  Description: "Other"
          Forecast:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Forecast timeseries of market value for an associated energy carrier"
        MetaData:
          Description: "Group holding market value forecasts for one or multiple energy carriers."
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      Payout: *PowerPlantScheduler_P_Payout
      DispatchAssignment: *PowerPlantScheduler_P_DispatchAssignment
      GateClosureForward: *TraderWithClients_P_GateClosureForward
      ForecastRequestForward: *TraderWithClients_P_ForecastRequestForward
      SupportInfoRequest: &AggregatorTrader_P_SupportInfoRequest
        MetaData:
          Description: "Request for support information for contracted technology set(s)"
      SupportPayoutRequest: &AggregatorTrader_P_SupportPayoutRequest
        MetaData:
          Description: "Request to obtain support payments for contracted technology set(s)"
      YieldPotential: &AggregatorTrader_P_YieldPotential
        MetaData:
          Description: "Yield potential of contracted technology set(s)"
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      ReceivedSupportInEUR: &AggregatorTrader_O_ReceivedSupport
        MetaData:
          Description: "Overall received support payments from policy agent"
      RefundedSupportInEUR: &AggregatorTrader_O_RefundedSupport
        MetaData:
          Description: "Overall support refunded to policy agent (in CFD scheme)"
      ReceivedMarketRevenues: &AggregatorTrader_O_ReceivedMarketRevenues
        MetaData:
          Description: "Overall received market revenues from marketing power plants"
      TrueGenerationPotentialInMWH: &AggregatorTrader_O_TrueGenerationPotential
        MetaData:
          Description: "Actual electricity generation potential"
    MetaData:
      Description: "The RenewableTrader is an AggregatorTrader which markets plants eligible for support other than FIT. It trades energy of associated power plants at the EnergyExchange. It is kind of a direct marketer which markets generation that is either under a market premium scheme (MPVAR, MPFIX), a capacity premium scheme (CP) a contracts for differences scheme (CFD)."
      OEONearestConcept: OEO_00040005

  NoSupportTrader:
    Attributes:
      ShareOfRevenues:
        AttributeType: double
        Mandatory: true
        List: false
        MetaData:
          Description: "The share of the market revenues, the RenewableTrader may keep, must be between 0 and 1."
          OEONearestConcept: OEO_00020128
      ForecastError: *AggregatorTrader_G_ForecastError
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      Payout: *PowerPlantScheduler_P_Payout
      DispatchAssignment: *PowerPlantScheduler_P_DispatchAssignment
      GateClosureForward: *TraderWithClients_P_GateClosureForward
      ForecastRequestForward: *TraderWithClients_P_ForecastRequestForward
      SupportInfoRequest: *AggregatorTrader_P_SupportInfoRequest
      SupportPayoutRequest: *AggregatorTrader_P_SupportPayoutRequest
      YieldPotential: *AggregatorTrader_P_YieldPotential
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      ReceivedSupportInEUR: *AggregatorTrader_O_ReceivedSupport
      RefundedSupportInEUR: *AggregatorTrader_O_RefundedSupport
      ReceivedMarketRevenues: *AggregatorTrader_O_ReceivedMarketRevenues
      TrueGenerationPotentialInMWH: *AggregatorTrader_O_TrueGenerationPotential
    MetaData:
      Description: "The NoSupportTrader is an AggregatorTrader to market renewable generation that doesn't receive any support payments. It trades energy of associated power plants at the EnergyExchange."
      OEONearestConcept: OEO_00040005

  SystemOperatorTrader:
    Attributes:
      ForecastError: *AggregatorTrader_G_ForecastError
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      Payout: *PowerPlantScheduler_P_Payout
      DispatchAssignment: *PowerPlantScheduler_P_DispatchAssignment
      GateClosureForward: *TraderWithClients_P_GateClosureForward
      ForecastRequestForward: *TraderWithClients_P_ForecastRequestForward
      SupportInfoRequest: *AggregatorTrader_P_SupportInfoRequest
      SupportPayoutRequest: *AggregatorTrader_P_SupportPayoutRequest
      YieldPotential: *AggregatorTrader_P_YieldPotential
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      ReceivedSupportInEUR: *AggregatorTrader_O_ReceivedSupport
      RefundedSupportInEUR: *AggregatorTrader_O_RefundedSupport
      ReceivedMarketRevenues: *AggregatorTrader_O_ReceivedMarketRevenues
      TrueGenerationPotentialInMWH: *AggregatorTrader_O_TrueGenerationPotential
    MetaData:
      Description: "The SystemOperatorTrader is an AggregatorTrader who trades renewable energy eligible for a FIT support scheme. It trades energy of associated power plants at the EnergyExchange."
      OEONearestConcept: OEO_00040005

  MarketForecaster:
    Attributes:
      Clearing: *DAM_G_Clearing
      ForecastPeriodInHours: &MarketForecaster_A_ForecastPeriod
        AttributeType: integer
        Mandatory: true
        List: false
        MetaData:
          Description: "The number of hours for which a forecast is produced."
          OEONearestConcept: OEO_00030035
    Products:
      ForecastRequest: &MarketForecaster_P_ForecastRequest
        MetaData:
          Description: "A request for a (perfect foresight) bid prognosis."
      MeritOrderForecast: &DamForecastProvider_P_MeritOrderForecast
        MetaData:
          Description: "Perfect foresight merit-order forecast for a specific market clearing event"
      PriceForecast: &DamForecastProvider_P_PriceForecast
        MetaData:
          Description: "Perfect foresight price electricity forecast for a specific market clearing event"
    Outputs:
      AwardedEnergyForecastInMWH: &MarketForecaster_O_AwardedEnergyForecast
        MetaData:
          Description: "Forecasted total awarded energy in MWh"
      ElectricityPriceForecastInEURperMWH: &MarketForecaster_O_ElectricityPriceForecast
        MetaData:
          Description: "Forecasted electricity price in EUR per MWh"
    MetaData:
      Description: "Provides perfect foresight forecasts for the day-ahead market to other agents. To have meaningful forecasts, all agents need to actually bid at Exchange with their intended bids given earlier to the Forecaster."

  MeritOrderForecaster:
    Attributes:
      Clearing: *DAM_G_Clearing
      ForecastPeriodInHours: *MarketForecaster_A_ForecastPeriod
    Products:
      ForecastRequest: *MarketForecaster_P_ForecastRequest
      MeritOrderForecast: *DamForecastProvider_P_MeritOrderForecast
    Outputs:
      AwardedEnergyForecastInMWH: *MarketForecaster_O_AwardedEnergyForecast
      ElectricityPriceForecastInEURperMWH: *MarketForecaster_O_ElectricityPriceForecast
    MetaData:
      Description: "Deprecated - use MarketForecaster instead. A subtype type of MarketForecaster. Provides perfect foresight day-ahead merit-order forecasts to other agents."

  PriceForecaster:
    Attributes:
      Clearing: *DAM_G_Clearing
      ForecastPeriodInHours: *MarketForecaster_A_ForecastPeriod
    Products:
      ForecastRequest: *MarketForecaster_P_ForecastRequest
      PriceForecast: *DamForecastProvider_P_PriceForecast
    Outputs:
      AwardedEnergyForecastInMWH: *MarketForecaster_O_AwardedEnergyForecast
      ElectricityPriceForecastInEURperMWH: *MarketForecaster_O_ElectricityPriceForecast
    MetaData:
      Description: "Deprecated - use MarketForecaster instead. A subtype of MarketForecaster. Provides perfect foresight day-ahead price forecasts to other agents."

  PriceForecasterFile:
    Attributes:
      PriceForecastsInEURperMWH:
        AttributeType: time_series
        Mandatory: true
        List: false
        help: "Time series of price forecasts"
        MetaData:
          Description: "A predetermined price forecast timeseries"
    Products:
      PriceForecast:
        MetaData:
          Description: "Price forecasts based on an external simulation input"
    MetaData:
      Description: "A type of Forecaster for the day-ahead electricity market. It provides electricity price forecasts to connected agents. These price forecasts are predetermined before the simulation begins, therefore exogenously defined, making them static in nature."

  PriceForecasterApi:
    Attributes:
      Clearing: *DAM_G_Clearing
      ForecastPeriodInHours: *MarketForecaster_A_ForecastPeriod
      ServiceURL:
        AttributeType: string
        Mandatory: true
        List: false
        help: "URL to amiris-priceforecast api"
        MetaData:
          Description: "URL connection to an external API providing forecasts"
      LookBackWindowInHours:
        AttributeType: integer
        Mandatory: false
        List: false
        help: "Number of TimeSteps for look back; is set to ForecastPeriodInHours if not provided."
        MetaData:
          Description: "Number of TimeSteps the external forecasting model can look back into the past in order to create the forecasts"
      ForecastWindowExtensionInHours:
        AttributeType: integer
        Mandatory: false
        List: false
        help: "Number of TimeSteps additional to forecast horizon to be requested from API; (default=0)"
        MetaData:
          Description: "Additional number of TimeSteps that are to be forecasted, in order to reduce calls of the external API model"
      ForecastErrorToleranceInEURperMWH:
        AttributeType: double
        Mandatory: false
        List: false
        help: "Max accepted deviation between forecasted and realized electricity prices; if violated price forecasts are updated; if negative, no checks are performed; (default=-1)"
        MetaData:
          Description: "Tolerance for deviation between forecasted and realized electricity prices; small tolerances may result in more API calls."
      ResidualLoadInMWh:
        AttributeType: time_series
        Mandatory: false
        List: false
        MetaData:
          Description: "Specific load time series derived from total electricity demand minus all renewable energy supply"
    Products:
      PriceForecast:
        MetaData:
          Description: "Price forecasts based on an external model"
      SensitivityForecast:
        MetaData:
          Description: "Forecast of a market clearing sensitivity; only sensitivities from a static price and a multiplier of 1 are available."
    Outputs:
      ElectricityPriceForecastInEURperMWH: *MarketForecaster_O_ElectricityPriceForecast
      ElectricityPriceForecastVarianceInEURperMWH:
        MetaData:
          Description: "Variance of forecasted electricity price in EUR per MWh"
    MetaData:
      Description: "A type of Forecaster for the day-ahead electricity market; it provides electricity price forecasts to connected agents. These price forecasts are calculated by an external forecasting model using URLModelSerive."

  SensitivityForecaster:
    Attributes:
      ForecastPeriodInHours: *MarketForecaster_A_ForecastPeriod
      Clearing: *DAM_G_Clearing
      MultiplierEstimation:
        MetaData:
          Description: "Parameters used for the estimation of dispatch multipliers of sensitivity forecast clients"
        AttributeType: block
        Mandatory: false
        List: false
        NestedAttributes:
          IgnoreAwardFactor:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "Awards with less energy than maximum energy divided by this factor are ignored."
          InitialEstimateWeight:
            AttributeType: integer
            Mandatory: false
            List: false
            MetaData:
              Description: "Weight of the initial estimate."
          DecayInterval:
            AttributeType: integer
            Mandatory: false
            List: false
            MetaData:
              Description: "Interval steps after which a factor weight has reduced to exp(-1)."
    Products:
      SensitivityForecast: &SensitivityForecastProvider_P_SensitivityForecast
        MetaData:
          Description: "Forecast of a market clearing sensitivity; type of sensitivity depends on the registered needs of the client"
      ForecastRequest: *MarketForecaster_P_ForecastRequest
      MeritOrderForecast: *DamForecastProvider_P_MeritOrderForecast
      PriceForecast: *DamForecastProvider_P_PriceForecast
    Outputs:
      AwardedEnergyForecastInMWH: *MarketForecaster_O_AwardedEnergyForecast
      ElectricityPriceForecastInEURperMWH: *MarketForecaster_O_ElectricityPriceForecast
    MetaData:
      Description: "Forecaster that provides forcasts for sensitivies of the kind demanded by its clients."

  ConventionalPlantOperator:
    Attributes:
      Refinancing: &PPO_G_Refinancing
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
          Description: "Refinancing specifications"
        NestedAttributes:
          InvestmentExpensesInEURperMW:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "Investment expenses in EUR/MW."
          AnnuityFactor:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "The annuity factor."
          AnnualFixedCostsInEURperMW:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "The annual fixed costs in EUR/MW."
    Products:
      MarginalCost: &PPO_P_MarginalCost
        MetaData:
          Description: "The marginal cost(s) of the power plant(s)"
          OEONearestConcept: OEO_00040008
      MarginalCostForecast: &PPO_P_MarginalCostForecast
        MetaData:
          Description: "A forecast for the marginal cost(s) of the power plant(s)"
      AnnualCostReport: &PPO_P_AnnualCostReport
        MetaData:
          Description: "The annual cost report."
      FuelPriceForecastRequest: &FuelsTrader_P_FuelPriceForecastRequest
        MetaData:
          Description: "Request for a price forecast at a given time and for a given fuel."
      FuelPriceRequest: &FuelsTrader_P_FuelPriceRequest
        MetaData:
          Description: "Request for fuel price at a given time and for a given fuel."
      FuelBid: &FuelsTrader_P_FuelBid
        MetaData:
          Description: "Bid for a specific fuel."
      Co2Emissions:
        MetaData:
          Description: "Total actual emissions produced during power generation."
          OEONearestConcept: OEO_00260007
      Co2PriceForecastRequest:
        MetaData:
          Description: "Request for a CO2 price forecast at a given time"
      Co2PriceRequest:
        MetaData:
          Description: "Request for a CO2 price at a given time"
    Outputs:
      AwardedEnergyInMWH: &PPO_O_AwardedEnergy
        MetaData:
          Description: "Electricity awarded for production"
      OfferedEnergyInMWH: &PPO_O_OfferedEnergy
        MetaData:
          Description: "Electricity offered for production"
      ReceivedMoneyInEUR: &PPO_O_ReceivedMoney
        MetaData:
          Description: "Money received"
      VariableCostsInEUR: &PPO_O_VariableCosts
        MetaData:
          Description: "Variable operation and maintenance costs"
      FixedCostsInEUR: &PPO_O_FixedCosts
        MetaData:
          Description: "Fixed operation and maintenance costs"
      InvestmentAnnuityInEUR: &PPO_O_InvestmentAnnuity
        MetaData:
          Description: "Annual share of investment cost"
      DispatchedEnergyInMWHperPlant:
        MetaData:
          Description: "Energy production in MWh per time interval and power plant"
      VariableCostsInEURperPlant:
        MetaData:
          Description: "Variable operation costs in EUR per time interval and power plant"
      ReceivedMoneyInEURperPlant:
        MetaData:
          Description: "Money assigned to each power plant in EUR per time interval"
      Co2EmissionsInT:
        MetaData:
          Description: "Total CO2 emissions for all power plants per time interval"
      FuelConsumptionInThermalMWH:
        MetaData:
          Description: "Total fuel consumption for all power plants per time interval"
    MetaData:
      Description: "The ConventionalPlantOperator is a type of PowerPlantOperator. It holds a Portfolio of conventional power plants and sends MarginalCosts (and their forecasts) to an associated ConventionalTrader."
      OEONearestConcept: OEO_00140130
  VariableRenewableOperator:
    Attributes:
      PolicySet: &RPO_A_Set
        AttributeType: string_set
        Mandatory: false
        List: false
        MetaData:
          Description: "Sets for energy-carrier-specific remuneration"
      EnergyCarrier: &RPO_A_EnergyCarrier
        AttributeType: enum
        Mandatory: true
        List: false
        Values: *SupportPolicy_V_EnergyCarrier
        MetaData:
          Description: "EnergyCarrier used by this plant operator to produce electricity."
      SupportInstrument: &RPO_A_SupportInstrument
        AttributeType: enum
        Mandatory: false
        List: false
        Values: &PolicyItem_V_SupportInstrument
          FIT:
            MetaData:
              Description: "A feed-in-tariff (FIT)"
              OEONearestConcept: OEO_00020108
          MPVAR:
            MetaData:
              Description: "A variable market premium (MPVAR); as in the German Renewable Energies Act"
              OEONearestConcept: OEO_00020109
          MPFIX:
            MetaData:
              Description: "A fixed market premium (MPFIX)"
              OEONearestConcept: OEO_00020109
          CFD:
            MetaData:
              Description: "A contracts for differences (CFD) scheme, building on MPVAR"
          CP:
            MetaData:
              Description: "A capacity premium (CP) scheme"
          FINANCIAL_CFD:
            MetaData:
              Description: "A financial contract for differences (FINANCIAL_CFD) scheme"
        MetaData:
          Description: "Specifies support instrument to be used."
      InstalledPowerInMW: &RPO_A_InstalledPower
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "TimeSeries of total peak production capacity."
      OpexVarInEURperMWH: &RPO_A_OpexVar
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "TimeSeries of variable cost of operation."
          OEONearestConcept: OEO_00030034
      YieldProfile: &VRPO_A_YieldProfile
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "TimeSeries of actual power production; values are relative, where 0 represents no production possibility and 1 resembles possibility to deliver peak power (i.e. all the currently installed power)."
          OEONearestConcept: OEO_00030034
    Products:
      MarginalCost: *PPO_P_MarginalCost
      MarginalCostForecast: *PPO_P_MarginalCostForecast
      AnnualCostReport: *PPO_P_AnnualCostReport
      SetRegistration: &RPO_P_SetRegistration
        MetaData:
          Description: "A registration message to the marketing agent"
    Ouputs:
      AwardedEnergyInMWH: *PPO_O_AwardedEnergy
      OfferedEnergyInMWH: *PPO_O_OfferedEnergy
      ReceivedMoneyInEUR: *PPO_O_ReceivedMoney
      VariableCostsInEUR: *PPO_O_VariableCosts
      FixedCostsInEUR: *PPO_O_FixedCosts
      InvestmentAnnuityInEUR: *PPO_O_InvestmentAnnuity
    MetaData:
      Description: "The VariableRenewableOperator is a RenewablePlantOperator for renewable plants with a variable yield profile."
      OEONearestConcept: OEO_00140130

  VariableRenewableOperatorPpa:
    Attributes:
      PolicySet: *RPO_A_Set
      EnergyCarrier: *RPO_A_EnergyCarrier
      SupportInstrument: *RPO_A_SupportInstrument
      InstalledPowerInMW: *RPO_A_InstalledPower
      OpexVarInEURperMWH: *RPO_A_OpexVar
      YieldProfile: *VRPO_A_YieldProfile
      PpaPriceInEURperMWH: &VRPOP_A_PpaPrice
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "Price for selling power via a bilateral Power Purchase Agreement"
      Refinancing: *PPO_G_Refinancing
    Products:
      MarginalCost: *PPO_P_MarginalCost
      MarginalCostForecast: *PPO_P_MarginalCostForecast
      AnnualCostReport: *PPO_P_AnnualCostReport
      SetRegistration: *RPO_P_SetRegistration
      PpaInformation: &VRPOP_P_PpaInformation
        MetaData:
          Description: "Details about a Power Purchase Agreement (PPA) with this plant operator"
      PpaInformationForecast: &VRPOP_P_PpaInformationForecast
        MetaData:
          Description: "Details about a Power Purchase Agreement (PPA) with this plant operator for the future"
      PotentialLogging: &VRPOP_P_Ppa_PotentialLogging
        MetaData:
          Description: "Trigger for logging own power plant production potential."
    Ouputs:
      AwardedEnergyInMWH: *PPO_O_AwardedEnergy
      OfferedEnergyInMWH: *PPO_O_OfferedEnergy
      ReceivedMoneyInEUR: *PPO_O_ReceivedMoney
      VariableCostsInEUR: *PPO_O_VariableCosts
      FixedCostsInEUR: *PPO_O_FixedCosts
      InvestmentAnnuityInEUR: *PPO_O_InvestmentAnnuity
    MetaData:
      Description: "The VariablePpaContractee is a power plant operating on variable renewable energy sources, fulfilling a single private purchase agreement (PPA) to market its energy"
      OEONearestConcept: OEO_00140130

  Biogas:
    Attributes:
      PolicySet: *RPO_A_Set
      EnergyCarrier: *RPO_A_EnergyCarrier
      InstalledPowerInMW: *RPO_A_InstalledPower
      OpexVarInEURperMWH: *RPO_A_OpexVar
      SupportInstrument: *RPO_A_SupportInstrument
      FullLoadHoursPerYear:
        AttributeType: double
        List: false
        Mandatory: false
        MetaData:
          Description: "Determines scaling factor (by dividing with 8760) applied to output power for all strategies except FROM_FILE."
          OEONearestConcept: OEO_00140144
      OperationMode:
        AttributeType: enum
        List: false
        Mandatory: true
        Values:
          CONTINUOUS:
            MetaData:
              Description: "Biogas offers (the more or less) constant base power output to its associated Trader, e.g. SystemOperatorTrader."
          DAY_NIGHT:
            MetaData:
              Description: "The Agent offers 50% of its base power output at night (from 19h to 6h) and 150% at daylight (from 7h to 18h)."
          FROM_FILE:
            MetaData:
              Description: "Biogas offers power according to the specified DispatchTimeSeries. This TimeSeries needs to contain values between 0 and 1 reflecting the power output relative to the installed power. Here, the FullLoadHoursPerYear are not applied as a scaling factor."
        MetaData:
          Description: "There are 3 OperationModes available for the Biogas agent. Common to most modes is the base power output according to the currently InstalledPowerInMW scaled by FullLoadHoursPerYear / 8760. This scaling factor is not applied in the FROM_FILE mode, however."
      DispatchTimeSeries:
        AttributeType: time_series
        List: false
        Mandatory: false
        MetaData:
          Description: "Only used in mode FROM_FILE: determines the available power output by multiplication with InstalledPowerInMW."
          OEONearestConcept: OEO_00030034
      Refinancing: *PPO_G_Refinancing
    Products:
      MarginalCost: *PPO_P_MarginalCost
      MarginalCostForecast: *PPO_P_MarginalCostForecast
      AnnualCostReport: *PPO_P_AnnualCostReport
      SetRegistration: *RPO_P_SetRegistration
    Outputs:
      AwardedEnergyInMWH: *PPO_O_AwardedEnergy
      OfferedEnergyInMWH: *PPO_O_OfferedEnergy
      ReceivedMoneyInEUR: *PPO_O_ReceivedMoney
      VariableCostsInEUR: *PPO_O_VariableCosts
      FixedCostsInEUR: *PPO_O_FixedCosts
      InvestmentAnnuityInEUR: *PPO_O_InvestmentAnnuity
    MetaData:
      Description: "The Biogas Agent is a renewable RenewablePlantOperator. It burns biogas produced in local bioreactors using combustion engines to generate electricity. The plant is assumed to have either a constant electricity output, or to have flexible electricity generation utilising short-term biogas buffer storages."
      OEONearestConcept: OEO_00140130

  PredefinedPlantBuilder:
    Attributes:
      PortfolioBuildingOffsetInSeconds: &PBM_A_PortfolioBuildingOffset
        AttributeType: long
        Mandatory: true
        List: false
        MetaData:
          Description: "Time offset between contracted delivery time of the portfolio and their actual first activation."
      Prototype: &PBM_G_Prototype
        AttributeType: block
        Mandatory: true
        List: false
        NestedAttributes:
          FuelType: *FuelsTrader_A_FuelType
          SpecificCo2EmissionsInTperMWH: &PBM_A_SpecificCo2Emissions
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Specific CO2-emissions in tons per thermal MWh."
              OEONearestConcept: OEO_00260007
          PlannedAvailability: &PBM_A_PlannedAvailability
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The planned availability of the respective power plant technology, e.g. scheduled downtime of plants."
              OEONearestConcept: OEO_00140126
          UnplannedAvailabilityFactor: &PBM_A_UnplannedAvailabilityFactor
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The unplanned availability of the respective power plant technology, due to, e.g., technological problems."
              OEONearestConcept: OEO_00140129
          OpexVarInEURperMWH: &PBM_A_OpexVar
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The variable cost of the respective power plant technology."
              OEONearestConcept: OEO_00020145
          CyclingCostInEURperMW: &PBM_A_CyclingCost
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Additional cycling costs for conventional power plants in Euro per Megawatt, i.e. costs due to plant start up."
        MetaData:
          Description: "A prototype for similar powerplants"
      Efficiency:
        AttributeType: block
        Mandatory: true
        List: false
        NestedAttributes:
          Minimal:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The minimum efficiency of the respective power plant technology."
              OEONearestConcept: OEO_00140050
          Maximal:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The maximal efficiency of the respective power plant technology."
              OEONearestConcept: OEO_00140050
        MetaData:
          Description: "Group of efficiency attributes (minimal, maximal)."
          OEONearestConcept: OEO_00140050
      BlockSizeInMW:
        AttributeType: double
        Mandatory: true
        List: false
        MetaData:
          Description: "Defines the typical power capacity of a PowerPlant within the Portfolio to generate."
          OEONearestConcept: OEO_00140128
      InstalledPowerInMW:
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "Time series of total installed power for the respective plant technology managed by this PredefinedPlantBuilder."
      EfficiencyRoundingPrecision:
        AttributeType: integer
        Mandatory: false
        List: false
        MetaData:
          Description: "Optional parameter: if present causes interpolated efficiencies to be rounded to the given number of digits."
    Products:
      PowerPlantPortfolio: &PBM_P_PowerPlantPortfolio
        MetaData:
          Description: "The portfolio of technologies of a particular powerplant."
          OEONearestConcept: OEO_00140137
    Outputs: []
    MetaData:
      Description: "A PredefinedPlantBuilder is a PlantBuildingManager that creates Portfolios following given TimeSeries of installed total power and efficiencies for a given power plant technology."
      OEONearestConcept: OEO_00000051

  IndividualPlantBuilder:
    Attributes:
      PortfolioBuildingOffsetInSeconds: *PBM_A_PortfolioBuildingOffset
      Prototype: *PBM_G_Prototype
      Plants:
        AttributeType: block
        Mandatory: true
        List: true
        MetaData:
          Description: "List of power plants in the portfolio"
        NestedAttributes:
          Efficiency:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The efficiency of the plant in converting fuel to electricity."
          NetCapacityInMW:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Net electricity production capacity in MW."
          ActivationTime:
            AttributeType: TIME_STAMP
            Mandatory: false
            List: false
            MetaData:
              Description: "Time at which the power plants becomes available. No electricity is produced before that time."
          DeactivationTime:
            AttributeType: TIME_STAMP
            Mandatory: false
            List: false
            MetaData:
              Description: "Time at which the power plants becomes unavailable. No electricity is produced at that time or later."
          Id:
            AttributeType: STRING
            Mandatory: false
            List: false
            MetaData:
              Description: "Identification string for the associated power plant"
          Override:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Values given here override those specified in the associated portfolio"
            NestedAttributes:
              PlannedAvailability:
                AttributeType: time_series
                Mandatory: false
                List: false
                MetaData:
                  Description: "The planned availability of the respective power plant technology, e.g. scheduled downtime of plants."
                  OEONearestConcept: OEO_00140126
              UnplannedAvailabilityFactor:
                AttributeType: double
                Mandatory: false
                List: false
                MetaData:
                  Description: "The unplanned availability of the respective power plant technology, due to, e.g., technological problems."
                  OEONearestConcept: OEO_00140129
              OpexVarInEURperMWH:
                AttributeType: time_series
                Mandatory: false
                List: false
                MetaData:
                  Description: "The variable cost of the respective power plant technology."
                  OEONearestConcept: OEO_00020145
              CyclingCostInEURperMW:
                AttributeType: double
                Mandatory: false
                List: false
                MetaData:
                  Description: "Additional cycling costs for conventional power plants in Euro per Megawatt, i.e. costs due to plant start up."
    Products:
      PowerPlantPortfolio: *PBM_P_PowerPlantPortfolio
    Outputs: []
    MetaData:
      Description: "A power plant builder that creates portfolios from a predefined list of power plants."
  ElectrolysisTrader:
    Attributes:
      FuelType: *FuelsTrader_A_FuelType
      Refinancing: *AnnualCostCalculator_G_Refinancing
      Device: &Electrolyzer_G_Device
        AttributeType: block
        Mandatory: true
        List: false
        NestedAttributes:
          PeakConsumptionInMW:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The peak electricity consumption in MW."
          ConversionFactor:
            AttributeType: double
            Mandatory: true
            List: false
            help: "Factor < 1 to convert electric energy to hydrogen's thermal energy equivalent"
            MetaData:
              Description: "Factor < 1 to convert electric energy to hydrogen's thermal energy equivalent."
        MetaData:
          Description: "Technical details of the electrolysis device to administrate."
      Strategy:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Strategy parameters to operate the electrolyser unit"
        NestedAttributes:
          StrategistType:
            AttributeType: enum
            Mandatory: true
            List: false
            MetaData:
              Description: "Type of strategist employed to dispatch the electrolyzer unit"
            Values:
              DISPATCH_FILE:
                MetaData:
                  Description: "Creates the dispatch schedule according to a given TimeSeries."
              SINGLE_AGENT_SIMPLE:
                MetaData:
                  Description: "Schedules based on a moving target of hydrogen production totals and electricity prices"
          ForecastPeriodInHours: &ElectrolysisTrader_Strategy_A_ForecastPeriod
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of hours to the future at which the forecast is available. Must be smaller or equal to that of the MarketForecaster."
          ScheduleDurationInHours: &ElectrolysisTrader_Strategy_A_ScheduleDuration
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of hours each created schedule is viable"
          BidToleranceInEURperMWH: &ElectrolysisTrader_Strategy_A_BidTolerance
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "Tolerance value added to each calculated electricity bid in EUR/MWh."
          PriceLimitOverrideInEURperMWH: &ElectrolysisTrader_Strategy_A_PriceLimitOverride
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Overrides electricity price bidding limit otherwise inferred from hydrogen price"
          FixedDispatch:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Dispatch specifications for the DISPATCH_FILE strategist"
            NestedAttributes:
              HourlySchedule:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "Describes the dispatch of the corresponding electrolyzer; its interpretation also depends on Mode and Target values."
              Mode:
                AttributeType: enum
                Mandatory: true
                List: false
                MetaData:
                  Description: "Dispatch time series interpretation: mode of value interpretation"
                Values:
                  ABSOLUTE:
                    MetaData:
                      Description: "Schedule time series is interpreted as absolute conversion energy in MWh."
                  RELATIVE:
                    MetaData:
                      Description: "Schedule time series is interpreted as conversion rate relative to peak conversion capacity."
                help: "Whether schedule is absolute or relative to installed converter power"
              Target:
                AttributeType: enum
                Mandatory: true
                List: false
                Values:
                  ELECTRICITY:
                    MetaData:
                      Description: "Time series is interpreted as electricity consumption"
                  HYDROGEN:
                    MetaData:
                      Description: "Time series is interpreted as hydrogen production"
                help: "Whether the schedule represent hydrogen production or electricity consumption"
                MetaData:
                  Description: "Dispatch time series interpretation: associated value"
          Simple:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Dispatch specifications for the SINGLE_AGENT_SIMPLE strategist"
            NestedAttributes:
              HydrogenProductionTargetInMWH:
                AttributeType: time_series
                Mandatory: true
                List: false
                help: "How much hydrogen to produce per production interval"
                MetaData:
                  Description: "Time series specifying the targeted total hydrogen production within the ProductionTargetIntervalInHours; Important: Always synchronise data points with production target interval (e.g.: production interval X hours → total hydrogen production target specifications every X hours)."
              ProductionTargetIntervalInHours:
                AttributeType: integer
                Mandatory: true
                List: false
                help: "How many hours a production interval spans"
                MetaData:
                  Description: "Time resolution of HydrogenProductionTargetInMWH time series data points; Beware: If this time resolution does not match that of the time series and time series is anything other than a constant → results will be wrong! Attention: Value should not be smaller than forecast period!"
              PriceSensitivityFunction:
                AttributeType: double
                Mandatory: true
                List: true
                help: "Price change per additional load in EUR per MWH per MWH"
                MetaData:
                  Description: "Estimate of how the electricity price rises with increasing the demand at a given price (i.e. price change per demand change over price); given as linear factors of a Polynomial."
              PowerStepInMW:
                AttributeType: double
                Mandatory: true
                List: false
                MetaData:
                  Description: "Energy resolution of the algorithm: the smaller, the more steps are required to complete the algorithm."
      Support: &HydrogenSupportClient_G_Support
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
            Description: "Hydrogen support information"
        NestedAttributes:
          SupportInstrument: &HydrogenSupportClient_A_SupportInstrument
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              MPFIX:
                MetaData:
                  Description: "A fixed market premium"
                  OEONearestConcept: OEO_00020109
          HydrogenPolicySet: *HydrogenSupportPolicy_A_HydrogenPolicySet
    Products:
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      PriceForecastRequest: *ForecastClient_P_PriceForecastRequest
      AnnualCostReport: *FlexibilityTrader_P_AnnualCostReport
      FuelPriceForecastRequest: *FuelsTrader_P_FuelPriceForecastRequest
      FuelPriceRequest: *FuelsTrader_P_FuelPriceRequest
      FuelBid: *FuelsTrader_P_FuelBid
      SupportInfoRequest: &HydrogenSupportClient_P_SupportInfoRequest
        MetaData:
          Description: "Registration for hydrogen support instrument"
      SupportPayoutRequest: &HydrogenSupportClient_P_SupportPayoutRequest
        MetaData:
          Description: "Request for hydrogen support payout"
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      FixedCostsInEUR: *FlexibilityTrader_O_FixedCosts
      InvestmentAnnuityInEUR: *FlexibilityTrader_O_InvestmentAnnuity
      VariableCostsInEUR: *FlexibilityTrader_O_VariableCosts
      ReceivedMoneyInEUR: *FlexibilityTrader_O_ReceivedMoney
      ReceivedMoneyForHydrogenInEUR: &ElectrolysisTrader_O_ReceivedMoneyForHydrogen
        MetaData:
          Description: "Total received money for selling hydrogen in EUR"
      OfferedElectricityPriceInEURperMWH: &ElectrolysisTrader_O_OfferedElectricityPrice
        MetaData:
          Description: "Offered electricity price in EUR per MWh"
      ProducedHydrogenInMWH: &ElectrolysisTrader_O_ProducedHydrogen
        MetaData:
          Description: "Produced amount of hydrogen in thermal MWh"
      ReceivedHydrogenSupportInEUR: &HydrogenSupportClient_O_ReceivedHydrogenSupportInEUR
        MetaData:
          Description: "Received support for hydrogen in EUR"
    MetaData:
      Description: "ElectrolysisTrader is a type of FlexibilityTrader that operates an electrolyzer unit to produce hydrogen from electricity."
  GreenHydrogenTrader:
    Attributes:
      Device: *Electrolyzer_G_Device
      FuelType: *FuelsTrader_A_FuelType
      Refinancing: *AnnualCostCalculator_G_Refinancing
      Support: *HydrogenSupportClient_G_Support
    Products:
      PpaInformationRequest: &GreenHydrogenProducer_P_PpaInformationRequest
        MetaData:
          Description: "Request for available power and price from a renewable power plant operator contracted via a Power Purchase Agreement"
      PpaInformationForecastRequest: &GreenHydrogenProducer_P_PpaInformationForecastRequest
        MetaData:
          Description: "Request for available power and price at a future time from a renewable power plant operator contracted via a Power Purchase Agreement"
      AnnualCostReport: *FlexibilityTrader_P_AnnualCostReport
      FuelPriceForecastRequest: *FuelsTrader_P_FuelPriceForecastRequest
      FuelPriceRequest: *FuelsTrader_P_FuelPriceRequest
      FuelBid: *FuelsTrader_P_FuelBid
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      Payout: *PowerPlantScheduler_P_Payout
      DispatchAssignment: *PowerPlantScheduler_P_DispatchAssignment
      SupportInfoRequest: *HydrogenSupportClient_P_SupportInfoRequest
      SupportPayoutRequest: *HydrogenSupportClient_P_SupportPayoutRequest
    Outputs:
      ConsumedElectricityInMWH: &GreenHydrogenProducer_O_ConsumedElectricity
        MetaData:
          Description: "Amount of electricity consumed in this period for operating the electrolysis unit"
      ProducedHydrogenInMWH:
        MetaData:
          Description: "Amount of green hydrogen produced in this period using the electrolysis unit"
      VariableCostsInEUR:
        MetaData:
          Description: "Variable operation and maintenance costs in EUR"
      ReceivedMoneyForHydrogenInEUR:
        MetaData:
          Description: "Total received money for selling hydrogen in EUR"
      ReceivedMoneyForElectricityInEUR: &GreenHydrogenProducer_O_ReceivedMoneyForElectricity
        MetaData:
          Description: "Total received money for selling electricity in EUR"
      OfferedSurplusEnergyInMWH:
        MetaData:
          Description: "Surplus electricity generation offered to the day-ahead market in MWh"
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      ReceivedHydrogenSupportInEUR: *HydrogenSupportClient_O_ReceivedHydrogenSupportInEUR
    MetaData:
      Description: "A green hydrogen electrolysis operator; It purchases electricity directly from renewable power plants operators."
  LoadShiftingTrader:
    Attributes:
      LoadShiftingPortfolio:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "A portfolio of loads that are eligible for load shifting and whose flexibility is marketed by the respective LoadShiftingTrader"
        NestedAttributes:
          InitialEnergyLevelInMWH:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The (fictitious) initial level of load shifting portfolio in MWh"
          InitialShiftTimeInHours:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "The time which the load shifting portfolio has already been shifted for at the start of the simulation in hours"
          PowerInMW:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Maximum power in MW of load shifting portfolio that can be shifted up or down"
          PowerUpAvailability:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Availability time series for power shifts in upwards direction (increased load), relative to PowerInMW"
          PowerDownAvailability:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Availability time series for power shifts in downwards direction (decreased load), relative to PowerInMW"
          EnergyResolutionInMWH:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The resolution of discrete energy steps for any strategist other than ShiftProfitMaximiserExternal in MWh"
          EnergyLimitUpInMWH:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The absolute energy limit for a shift in upwards direction (increased load) in MWh"
          EnergyLimitDownInMWH:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The absolute energy limit for a shift in downwards direction (decreased load) in MWh"
          MaximumShiftTimeInHours:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "The maximum allowed time for a load shift in hours, including the initial hour of shifting"
          VariableShiftCostsInEURPerMWH:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The variable costs of a load shift given in EUR per MWh and attributed onto both, upshifts and downshifts"
          BaselineLoadTimeSeries:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "The originally planned load consumption before any load shifting given as a time series relative to BaselinePeakLoadInMW"
          BaselinePeakLoadInMW:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "The maximum peak load occurring before load shifting in MW"
          Efficiency:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "The efficiency of load shifting which must be between 0 and 1 (inclusive)"
          InterferenceTimeInHours:
            AttributeType: integer
            Mandatory: false
            List: false
            MetaData:
              Description: "The maximum allowed time for an upshift resp. a downshift as part of a shifting process, used only for strategist ShiftProfitMaximiserExternal"
          MaximumActivations:
            AttributeType: integer
            Mandatory: false
            List: false
            MetaData:
              Description: "The maximum number of full shift cycles over the course of the planning period (e.g. one year)"
      Strategy:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Group of parameters to describe the dispatch strategy for the load shifting parameter."
        NestedAttributes:
          StrategistType:
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              SINGLE_AGENT_MAX_PROFIT:
                MetaData:
                  Description: "Seeks to maximise the profit from load shifting"
              SINGLE_AGENT_MIN_SYSTEM_COST:
                MetaData:
                  Description: "Seeks to minimise the cost from load shifting"
              DISPATCH_FILE:
                MetaData:
                  Description: "Creates a DispatchSchedule following a given TimeSeries for an energy pattern and one for a shift time pattern, both read from input file. It can provide forecasts regarding its behaviour."
              SINGLE_AGENT_MAX_PROFIT_TARIFFS:
                MetaData:
                  Description: "Seeks to maximise the profit from load shifting thereby also considering tariff structures in addition to day-ahead electricity prices"
              SINGLE_AGENT_MIN_CONSUMER_COST_EXTERNAL:
                MetaData:
                  Description: "Seeks to minimise the total costs of energy consumption from load shifting thereby also considering tariff structures in addition to day-ahead electricity prices; Calls an external optimization micro-model for load shifting scheduling."
            MetaData:
              Description: "Type of dispatch strategy to be applied for load shifting scheduling"
          ForecastPeriodInHours: *Strategist_A_ForecastPeriod
          ScheduleDurationInHours: *Strategist_A_ScheduleDuration
          BidToleranceInEURperMWH: *Strategist_A_BidTolerance
          SingleAgent:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Parameters for single agent strategies"
            NestedAttributes:
              PurchaseLeviesAndTaxesInEURperMWH:
                AttributeType: double
                Mandatory: false
                List: false
                MetaData:
                  Description: "Taxes and levies for load shifting consumers that are due on a per MWh basis"
          FixedDispatch:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Parameters for DISPATCH_FILE strategy"
            NestedAttributes:
              EnergySchedule:
                AttributeType: time_series
                Mandatory: false
                List: false
                MetaData:
                  Description: "Time series of energy to be shifted, relative to upwards resp. downwards energy limits"
              ShiftTimeSchedule:
                AttributeType: time_series
                Mandatory: false
                List: false
                MetaData:
                  Description: "Time series for evolvement of current shifting time"
          Api:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Parameters for SINGLE_AGENT_MIN_ENERGY_COSTS_EXTERNAL strategy"
            NestedAttributes:
              ServiceUrl:
                AttributeType: string
                Mandatory: true
                List: false
                MetaData:
                  Description: "URL for the model service used"
              UseAnnualLimit:
                AttributeType: integer
                Mandatory: true
                List: false
                MetaData:
                  Description: "Boolean specifying whether to use annual limits"
              Solver:
                AttributeType: enum
                Mandatory: true
                List: false
                MetaData:
                  Description: "Solver to use for solving load shifting scheduling optimization problem"
                Values:
                  gurobi:
                    MetaData:
                      Description: "Gurobi Optimization solver"
                  cplex:
                    MetaData:
                      Description: "IBM's CPLEX solver"
                  cbc:
                    MetaData:
                      Description: "COIN OR's CBC solver"
                  glpk:
                    MetaData:
                      Description: "GNU Linear Programming Kit solver"
              PriceSensitivityEstimate:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "Estimate for the price sensitivity, i.e. the price change due to increased/decreased load"
      Policy: &EndUserTariff_G_Policy
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
          Description: "Group of parameters defining tariff policy for an end user flexibility trader"
          OEONearestConcept: OEO_00140150
        NestedAttributes:
          EEGSurchargeInEURPerMWH:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "The EEG levy (levy from German renewable energy act - EEG) in EUR per MWh"
          VolumetricNetworkChargeInEURPerMWH:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Volumetric network charges, i.e. charges dependent on consumed energy in EUR per MWh"
          ElectricityTaxInEURPerMWH:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Electricity tax in EUR per MWh"
          OtherSurchargesInEURPerMWH:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Other surcharges, such as CHP levy, § 19 StromNEV levy, concession fee, ... in EUR per MWh"
          DynamicTariffComponents:
            AttributeType: block
            List: true
            Mandatory: false
            MetaData:
              Description: "Group of tariff components that are made dynamic, i.e. varying with the model-endogenous day-ahead price"
            NestedAttributes:
              ComponentName:
                AttributeType: enum
                Mandatory: true
                List: false
                Values:
                  POWER_PRICE:
                    MetaData:
                      Description: "power price component corresponding to the day-ahead power price"
                  EEG_SURCHARGE:
                    MetaData:
                      Description: "The EEG levy (levy from German renewable energy act - EEG)"
                  VOLUMETRIC_NETWORK_CHARGE:
                    MetaData:
                      Description: "Volumetric network charges, i.e. charges dependent on consumed energy in EUR per MWh"
                  OTHER_COMPONENTS:
                    MetaData:
                      Description: "Other surcharges, such as CHP levy, § 19 StromNEV levy, concession fee, ... "
              Multiplier:
                AttributeType: time_series
                Mandatory: true
                List: false
                MetaData:
                  Description: "Multiplier used for calculating dynamic tariff component from model-endogenous day-ahead price"
              LowerBound:
                AttributeType: double
                Mandatory: false
                List: false
                MetaData:
                  Description: "Lower price bound to cap tariff component at"
              UpperBound:
                AttributeType: double
                Mandatory: false
                List: false
                MetaData:
                  Description: "Upper price bound to cap tariff component at"
          VAT:
            AttributeType: double
            Mandatory: false
            List: false
            MetaData:
              Description: "Value added tax multiplier in per cent"
          CapacityBasedNetworkChargesInEURPerMW:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Network charges based on peak consumption capacity for planning period (year) in EUR per MW"
          FixedNetworkChargesInEURPerYear:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Fixed network charges based on peak consumption capacity for planning period in EUR per MW"
      BusinessModel: &EndUserTariff_G_BusinessModel
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Group of parameters specifying the business model of an aggregator"
            NestedAttributes:
              ProfitMarginInEURPerMWH:
                AttributeType: double
                Mandatory: false
                List: false
                MetaData:
                  Description: "Assumed absolute margin of an aggregator providing electricity to its end users"
              AverageMarketPriceInEURPerMWH:
                AttributeType: time_series
                Mandatory: false
                List: false
                MetaData:
                  Description: "The average market price in EUR per MWh to be applied in case of a static tariff"
    Products:
      Bids: *DamTrader_P_Bids
      Payout: *PowerPlantScheduler_P_Payout
      DispatchAssignment: *PowerPlantScheduler_P_DispatchAssignment
      BidsForecast: *Trader_P_BidsForecast
      MeritOrderForecastRequest: *ForecastClient_P_MeritOrderForecastRequest
      PriceForecastRequest: *ForecastClient_P_PriceForecastRequest
      GateClosureForward: *TraderWithClients_P_GateClosureForward
      ForecastRequestForward: *TraderWithClients_P_ForecastRequestForward
    Outputs:
      OfferedUpshiftPowerInMW:
        MetaData:
          Description: "power offered to be shifted in upwards direction (load increase) compared to baseline load consumption"
      OfferedDownshiftPowerInMW:
        MetaData:
          Description: "power offered to be shifted in downwards direction (load reduction) compared to baseline load consumption"
      OfferedPriceInEURperMWH:
        MetaData:
          Description: "offered bid price to sell / purchase power at"
      AwardedUpshiftPowerInMW:
        MetaData:
          Description: "power awarded to be shifted in upwards direction (load increase) compared to baseline load consumption"
      AwardedDownshiftPowerInMW:
        MetaData:
          Description: "power awarded to be shifted in downwards direction (load reduction) compared to baseline load consumption"
      NetAwardedPowerInMW:
        MetaData:
          Description: "net power awarded to be shifted compared to baseline load consumption"
      StoredMWH:
        MetaData:
          Description: "(fictitious) load shifting energy storage level"
      CurrentShiftTimeInH:
        MetaData:
          Description: "number of consecutive hours for which the load shifting portfolio has already been shifted into one direction (upwards or downwards), i.e. for which the (fictitious) load shifting energy storage level is already unbalanced"
      RevenuesInEUR:
        MetaData:
          Description: "revenues from marketing power in the course of a downshift (load decrease)"
      CostsInEUR:
        MetaData:
          Description: "total costs for load shifting comprising costs for purchasing power in the course of an upshift (load increase) as well as variable costs for load shifting"
      VariableShiftingCostsInEUR:
        MetaData:
          Description: "variable costs for load shifting"
      ProfitInEUR:
        MetaData:
          Description: "revenues minus all variable costs"
      VariableShiftingCostsFromOptimiserInEUR:
        MetaData:
          Description: "variable costs for load shifting from optimization micro-model, called for strategist SINGLE_AGENT_MIN_CONSUMER_COSTS_EXTERNAL"
    MetaData:
      Description: "An aggregator marketing a portfolio of flexibile loads that are eligible for load shifting; It can apply different strategies for dispatch scheduling."
  GreenHydrogenTraderMonthly:
    Attributes:
      FuelType: *FuelsTrader_A_FuelType
      Refinancing: *AnnualCostCalculator_G_Refinancing
      Device: *Electrolyzer_G_Device
      Strategy:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Strategy parameters to operate the electrolyser unit"
        NestedAttributes:
          StrategistType:
            AttributeType: enum
            Mandatory: true
            List: false
            MetaData:
              Description: "Type of strategist employed to dispatch the electrolyzer unit"
            Values:
              GREEN_HYDROGEN_MONTHLY:
                MetaData:
                  Description: "Creates the dispatch schedule thereby ensuring monthly equivalence between the electrolysis demand and the associated renewable generation."
          ForecastPeriodInHours: *ElectrolysisTrader_Strategy_A_ForecastPeriod
          ScheduleDurationInHours: *ElectrolysisTrader_Strategy_A_ScheduleDuration
          BidToleranceInEURperMWH: *ElectrolysisTrader_Strategy_A_BidTolerance
          PriceLimitOverrideInEURperMWH: *ElectrolysisTrader_Strategy_A_PriceLimitOverride
      Support: *HydrogenSupportClient_G_Support
    Products:
      PpaInformationRequest: *GreenHydrogenProducer_P_PpaInformationRequest
      PpaInformationForecastRequest: *GreenHydrogenProducer_P_PpaInformationForecastRequest
      Bids: *DamTrader_P_Bids
      BidsForecast: *Trader_P_BidsForecast
      PriceForecastRequest: *ForecastClient_P_PriceForecastRequest
      AnnualCostReport: *FlexibilityTrader_P_AnnualCostReport
      FuelPriceForecastRequest: *FuelsTrader_P_FuelPriceForecastRequest
      FuelPriceRequest: *FuelsTrader_P_FuelPriceRequest
      FuelBid: *FuelsTrader_P_FuelBid
      Payout: *PowerPlantScheduler_P_Payout
      DispatchAssignment: *PowerPlantScheduler_P_DispatchAssignment
      MonthlyReset:
        MetaData:
          Description: "Request for reset of monthly schedule"
      SupportInfoRequest: *HydrogenSupportClient_P_SupportInfoRequest
      SupportPayoutRequest: *HydrogenSupportClient_P_SupportPayoutRequest
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      FixedCostsInEUR: *FlexibilityTrader_O_FixedCosts
      InvestmentAnnuityInEUR: *FlexibilityTrader_O_InvestmentAnnuity
      VariableCostsInEUR: *FlexibilityTrader_O_VariableCosts
      ReceivedMoneyInEUR: *FlexibilityTrader_O_ReceivedMoney
      OfferedEnergyPriceInEURperMWH: *ElectrolysisTrader_O_OfferedElectricityPrice
      ProducedHydrogenInMWH: *ElectrolysisTrader_O_ProducedHydrogen
      ConsumedElectricityInMWH: *GreenHydrogenProducer_O_ConsumedElectricity
      ReceivedMoneyForHydrogenInEUR: *ElectrolysisTrader_O_ReceivedMoneyForHydrogen
      ReceivedMoneyForElectricityInEUR: *GreenHydrogenProducer_O_ReceivedMoneyForElectricity
      ReceivedHydrogenSupportInEUR: *HydrogenSupportClient_O_ReceivedHydrogenSupportInEUR
    MetaData:
      Description: "GreenHydrogenTraderMonthly is a type of ElectrolysisTrader that operates an electrolyzer unit to produce hydrogen from green electricity purchased via a PPA ensuring monthly equivalence."
  HeatPumpTrader:
    Attributes:
      StrategyBasic:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Group of parameters defining basics of the heat pump dispatch strategy."
        NestedAttributes:
          ForecastPeriodInHours: *Strategist_A_ForecastPeriod
          ScheduleDurationInHours: *Strategist_A_ScheduleDuration
          BidToleranceInEURperMWH: *Strategist_A_BidTolerance
      HeatPump:
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
          Description: "Group of parameters defining the properties of heat pumps."
        NestedAttributes:
          MinElectricHeatPumpPowerInKW:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Rated power at the design ambient temperature (typically -14 Celsius for air/water heat pumps)."
              OEONearestConcept: OEO_00010157
          MaxElectricHeatPumpPowerInKW:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Rated power at the upper ambient temperature for heat pump specification (typically +10 Celsius for air/water heat pumps) in kW."
              OEONearestConcept: OEO_00010157
          MinCOP:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Coefficient of performance at the design ambient temperature (typically -14 Celsius for air/water heat pumps) in kW."
              OEONearestConcept: OEO_00140051
          MaxCOP:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Coefficient of performance at the upper ambient temperature for heat pump specification (typically +10 Celsius for air/water heat pumps)."
              OEONearestConcept: OEO_00140051
          HeatPumpPenetrationFactor:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Share of heatDemandProfile that should be covered by heat pumps, in case heatDemandProfile is given."
          InstalledUnits:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Total number of installed heat pumps, in case no heatDemandProfile is given."
      Device:
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
          Description: "Group of parameters defining the thermal storage used for strategist MIN_COST_FILE."
        NestedAttributes:
          EnergyToPowerRatio: *Device_A_EnergyToPowerRatio
          SelfDischargeRatePerHour: *Device_A_SelfDischargeRatePerHour
          ChargingEfficiency: *Device_A_ChargingEfficiency
          DischargingEfficiency: *Device_A_DischargingEfficiency
          InitialEnergyLevelInMWH: *Device_A_InitialEnergyLevelInMWH
          InstalledPowerInMW: *Device_A_InstalledPowerInMW
      HeatingInputData:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Group of input time series required for the calculation of electricity demand of heat pumps."
        NestedAttributes:
          TemperatureProfile:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Time series of ambient temperature at a specific location in Celsius."
          SolarRadiation:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Time series of total radiation on a vertical southern surface at a specific location in kW/m2."
              OEONearestConcept: OEO_00020038
          HeatDemandProfile:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Time series of heat demand at an aggregate level (e.g. Germany) in MWh/h."
          PvProfile:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Time series of pv yield at a specific location in kW/kWp."
      Strategy:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Group of parameters defining the dispatch strategy of heat pumps."
        NestedAttributes:
          ModelledChargingSteps:
            AttributeType: integer
            Mandatory: false
            List: false
            MetaData:
              Description: "Number of steps that is used to discretize the building's indoor air temperature."
          HeatPumpStrategistType:
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              MIN_COST_RC:
                MetaData:
                  Description: "Creates a cost-optimal dispatch schedule that satisfies a space heating demand that is endogenously calculated by a ThermalResponse model. Flexibility is provided by varying the indoor temperature of the building."
              INFLEXIBLE_RC:
                MetaData:
                  Description: "Creates an inflexible dispatch schedule that satisfies a space heating demand that is endogenously calculated by a ThermalResponse model. Heat pump operation is only oriented at current space heat demand, not at prices."
              MIN_COST_FILE:
                MetaData:
                  Description: "Creates a cost-optimal dispatch schedule from a given heat demand input time series. Flexibility is provided by a thermal storage."
              INFLEXIBLE_FILE:
                MetaData:
                  Description: "Creates an inflexible dispatch schedule from a given heat demand input time series that is independent of electricity prices."
              EXTERNAL:
                MetaData:
                  Description: "Creates a cost-optimal dispatch schedule according to real-time prices, which is endogenously calculated by a heat pump dispatch model."
              MetaData:
                Description: "Type of strategist employed to dispatch heat pumps Possible types are MIN_COST_RC, INFLEXIBLE_RC, MIN_COST_FILE, INFLEXIBLE_FILE, EXTERNAL."
          MinimalRoomTemperatureInC:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Minimum accepted indoor air temperature during the heating period in Celsius, in case a ThermalResponse model is used for heating demand calculation."
          MaximalRoomTemperatureInC:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Maximum accepted indoor air temperature during the heating period in Celsius, in case a ThermalResponse model is used for heating demand calculation."
          MeanRoomTemperatureInC:
            AttributeType: time_series
            Mandatory: false
            List: false
            MetaData:
              Description: "Average accepted indoor air temperature during the heating period in Celsius, in case a ThermalResponse model is used for heating demand calculation."
          ApiParameters:
            AttributeType: block
            Mandatory: false
            List: false
            MetaData:
              Description: "Parameters for EXTERNAL strategist."
            NestedAttributes:
              ServiceUrl:
                AttributeType: string
                Mandatory: true
                List: false
                MetaData:
                  Description: "URL for the model service used."
              StaticParameterFolder:
                AttributeType: string
                Mandatory: true
                List: false
                MetaData:
                  Description: "Folder that encapsulates all input data required for the external GAMS heat pump dispatch optimization model."
      Building:
        AttributeType: block
        Mandatory: false
        List: false
        MetaData:
          Description: "Group of parameters defining building thermodynamics for strategists MIN_COST_RC and INFLEXIBLE_RC."
        NestedAttributes:
          Ria:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Thermal resistance between the building interior and the ambient in Celsius/kW."
          Ci:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Capacitance of the interior of the building in kWh/Celsius."
          Ai:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Effective window area for absorption of solar gains on internal air in the building in m2."
          HeatingLimitTemperatureInC:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Ambient temperature above which heating is turned off in Celsius."
          InternalHeatGainsInKW:
            AttributeType: double
            Mandatory: true
            List: false
            MetaData:
              Description: "Internal heat gains inside the building in kW."
      Policy: *EndUserTariff_G_Policy
      BusinessModel: *EndUserTariff_G_BusinessModel
    Products:
      Bids: *DamTrader_P_Bids
      MeritOrderForecastRequest: *ForecastClient_P_MeritOrderForecastRequest
      PriceForecastRequest: *ForecastClient_P_PriceForecastRequest
    Outputs:
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      COP:
        MetaData:
          Description: "Coefficient of performance of heat pump."
      FinalRoomTemperatureInCelsius:
        MetaData:
          Description: "Indoor air temperature in Celsius."
      StoredEnergyInMWH:
        MetaData:
          Description: "Amount of heat stored in MWh."
    MetaData:
      Description: "HeatPumpTrader is a type of FlexibilityTrader that aggregates heat pumps in buildings and arranges procurement at the DayAheadMarket. Different strategies can be used to calculate the electricity demand of heat pumps. Heat pumps can be either dispatched according to heat demand or optimised according to spot market price forecasts."

  GenericFlexibilityTrader:
    Attributes:
      Refinancing: *AnnualCostCalculator_G_Refinancing
      Device:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "A generic device representing any kind of electrical flexibility, e.g., pumped-hydro storages with inflow, reservoir storages, heat pumps, electric vehicle fleets, or load-shifting portfolios."
        NestedAttributes:
          GrossChargingPowerInMW:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Gross maximum power for charging in MW drawn from the grid (external power)"
          NetDischargingPowerInMW:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Net maximum power from discharging provided to grid (external power)"
          ChargingEfficiency:
            AttributeType: time_series
            Mandatory: true
            List: false
            Default: 1.
            MetaData:
              Description: "Ratio between gross discharged energy drawn from the grid to net energy charging the flexibility device."
              OEONearestConcept: OEO_00140050
          DischargingEfficiency:
            AttributeType: time_series
            Mandatory: true
            List: false
            Default: 1.
            MetaData:
              Description: "Ratio between gross discharged energy from flexibility device to net energy fed to the grid."
              OEONearestConcept: OEO_00140050
          EnergyContentUpperLimitInMWH:
            AttributeType: time_series
            Mandatory: true
            List: false
            MetaData:
              Description: "Maximum internal energy content of the flexibility device"
          EnergyContentLowerLimitInMWH:
            AttributeType: time_series
            Mandatory: true
            List: false
            Default: 0.
            MetaData:
              Description: "Minimum internal energy content of the flexibility device"
          SelfDischargeRatePerHour:
            AttributeType: time_series
            Mandatory: true
            List: false
            Default: 0.
            MetaData:
              Description: "Hourly rate of energy loss relative to state of charge at beginning of each time interval; 0 means no self discharge; value between 0 and 1"
          NetInflowPowerInMW:
            AttributeType: time_series
            Mandatory: true
            List: false
            Default: 0.
            MetaData:
              Description: "Net inflow energy into the flexibility device (no charging efficiency applied; positive values are inflows, negative values represent outflows"
          InitialEnergyContentInMWH:
            AttributeType: double
            Mandatory: true
            List: false
            Default: 0.
            MetaData:
              Description: "The internal state of charge in MWH at the beginnig of the simulation"
      Assessment:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Configuration on how to assess the value of flexibility device states."
        NestedAttributes:
          Type:
            MetaData:
              Description: "The type of assessment function"
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              MAX_PROFIT_PRICE_TAKER:
                MetaData:
                  Description: "Maximise profit using an electricity price forecast neglecting any price impact of bids"
              MIN_SYSTEM_COST:
                MetaData:
                  Description: "Minimise total system costs using a merit order forecast that takes into account the impact of bids from all GenericFlexibilityTraders"
              MAX_PROFIT:
                MetaData:
                  Description: "Maximise own profits using a merit order forecast that takes into account the impact of bids from all GenericFlexibilityTraders"
      StateDiscretisation:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Configuration on how the flexibility device states are discretized in different dimensions, e.g., time, or energy"
        NestedAttributes:
          Type:
            MetaData:
              Description: "The type of state manager to use"
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              STATE_OF_CHARGE:
                MetaData:
                  Description: "Represent energy states of an electricity storage device"
          PlanningHorizonInHours:
            MetaData:
              Description: "Foresight time length in hours. Must be smaller or equal to that of the contracted Forecaster."
            AttributeType: double
            Mandatory: true
            List: false
          EnergyResolutionInMWH:
            MetaData:
              Description: "Resolution of the energy discretisation; lower values represent a higher resolution and better precision of planning, but come with (quadratically) higher calculation efforts."
            AttributeType: double
            Mandatory: true
            List: false
          WaterValues:
            MetaData:
              Description: "Parameters to define the (long-term) water values of the flexibility device depending on the state of charge and time"
            AttributeType: block
            Mandatory: false
            List: true
            NestedAttributes:
              StoredEnergyInMWH:
                MetaData:
                  Description: "The absolute state of charge of the flexibility device in MWh, which the associated water value timeseries applies to"
                AttributeType: double
                Mandatory: true
                List: false
              WaterValueInEUR:
                MetaData:
                  Description: "The absolute value in EUR of the associated absolute state of charge of the flexibility device"
                AttributeType: time_series
                Mandatory: true
                List: false
      Bidding:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Configuration on how to create bids from an optimised dispatch schedule"
        NestedAttributes:
          Type:
            MetaData:
              Description: "The type of bid scheduler"
            AttributeType: enum
            Mandatory: true
            List: false
            Values:
              ENSURE_DISPATCH:
                MetaData:
                  Description: "Ensures planned dispatch is fulfilled by bidding at technical price limits"
              STORAGE_CONTENT_VALUE:
                MetaData:
                  Description: "Uses estimated value changes of storage content to calculate bidding price"
          SchedulingHorizonInHours:
            MetaData:
              Description: "Number time length each created schedule is viable in hours; should be significantly larger than the flexibilities energy-to-power ratio."
            AttributeType: double
            Mandatory: true
            List: false
    Products:
      ForecastRegistration: &SensitivityForecastClient_P_ForecastRegistration
        MetaData:
          Description: "Registration specifying the type of forecast needed and the client's installed power"
      NetAward: &SensitivityForecastClient_P_NetAward
        MetaData:
          Description: "Report on the client's awarded energy at the local day-ahead market at a previous time"
      SensitivityRequest: &SensitivityForecastClient_P_SensitivityRequest
        MetaData:
          Description: "Request for a sensitivity forecast, specifying a time for which the forecast is required"
      Bids: *DamTrader_P_Bids
    Outputs:
      OfferedEnergyInMWH: *DamTrader_O_OfferedEnergy
      RequestedEnergyInMWH: *DamTrader_O_RequestedEnergy
      AwardedEnergyInMWH: *DamTrader_O_AwardedEnergy
      VariableCostsInEUR:
        MetaData:
          Description: "Variable operation and maintenance costs in EUR"
      ReceivedMoneyInEUR:
        MetaData:
          Description: "Total received money in EUR"
      OfferedChargePriceInEURperMWH:
        MetaData:
          Description: "Offered price for charging in EUR per MWh"
      OfferedDischargePriceInEURperMWH:
        MetaData:
          Description: "Offered price for discharging in EUR per MWh"
      AwardedChargeEnergyInMWH:
        MetaData:
          Description: "Total amount of charge energy awarded in MWh"
      AwardedDischargeEnergyInMWH:
        MetaData:
          Description: "Total amount of discharge energy awarded in MWh"
      StoredEnergyInMWH:
        MetaData:
          Description: "Amount of energy in stored in flexibility device in MWh after executing (dis-)charging actions in the current time step"
      DispatchMultiplier:
        MetaData:
          Description: "Multiplier applied to energy when planning dispatch to account for actions by other (competing) flexibility traders."
    MetaData:
      Description: "Trader that operates a generic flexibility device, e.g., a battery storage, pumped-hydro storage, load shifting, heat pumps..."

  HouseholdPvTraderExternal:
    Attributes:
      InstalledGenerationPowerInMW:
        AttributeType: double
        Mandatory: true
        List: false
        MetaData:
          Description: "Peak electricity generation capacity in MW of all households managed by the trader"
      LoadInMW:
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "Base household consumption pattern in MW without storage application of all households managed by the trader"
      GenerationProfile:
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "Relative electricity generation profile (values between 0 and 1) of the households managed by the trader"
      ServiceUrl:
        AttributeType: string
        Mandatory: true
        List: false
        MetaData:
          Description: "The URL pointing to the machine-learning model's API endpoint that provides the required prediction service"
      ModelId:
        AttributeType: string
        Mandatory: false
        List: false
        MetaData:
          Description: "The identifier of the machine-learning model to use for prediction"
      ForecastPeriodInHours:
        AttributeType: integer
        Mandatory: true
        List: false
        MetaData:
          Description: "Number of hours to the future at which the forecast is used. Must be smaller or equal to that of the MarketForecaster."
      PredictionWindows:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Input parameters to the machine-learning-based load-prediction model"
        NestedAttributes:
          EnergyGenerationForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future PV generation values to consider during forecasting"
          EnergyGenerationBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past PV generation values to consider during forecasting"
          StoredEnergyForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future stored energy values to consider during forecasting"
          StoredEnergyBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past stored energy values to consider during forecasting"
          ElectricityConsumptionForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future electricity consumption values to consider during forecasting"
          ElectricityConsumptionBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past electricity consumption values to consider during forecasting"
          ElectricityPriceForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future electricity price values to consider during forecasting"
          ElectricityPriceBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past electricity price values to consider during forecasting"
          GridInteractionBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past grid interaction values to consider during forecasting"
      Device: *Device_G_Device
      Policy: *EndUserTariff_G_Policy
      BusinessModel: *EndUserTariff_G_BusinessModel
    Products:
      PriceForecastRequest: *ForecastClient_P_PriceForecastRequest
      Bids: *DamTrader_P_Bids
    Outputs:
      AwardedDemandInMWh:
        MetaData:
          Description: "Amount of energy awarded in MWh to be delivered to households from the grid"
      AwardedSupplyInMWh:
        MetaData:
          Description: "Amount of energy awarded in MWh to be provided by households to the grid"
    MetaData:
      Description: "This trader sells and buys electricity generated by or required by households that have a installed generation device (e.g. photovoltaics) and an electricity storage unit."

  EvTraderExternal:
    Attributes:
      ForecastPeriodInHours:
        AttributeType: integer
        Mandatory: true
        List: false
        MetaData:
          Description: "Number of hours to the future at which the forecast is used. Must be smaller or equal to that of the MarketForecaster."
      ServiceUrl:
        AttributeType: string
        Mandatory: false
        List: false
        MetaData:
          Description: "The URL pointing to the machine-learning model's API endpoint that provides the required prediction service"
      ModelId:
        AttributeType: string
        Mandatory: false
        List: false
        MetaData:
          Description: "The identifier of the machine-learning model to use for prediction"
      AggregatedAvailableChargingPowerInMW:
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "The electric vehicle fleet's total electric charging power in MW"
      AggregatedElectricConsumptionInMWH:
        AttributeType: time_series
        Mandatory: true
        List: false
        MetaData:
          Description: "The electric vehicle fleet's total electricity consumption in MWh"
      PredictionWindows:
        AttributeType: block
        Mandatory: true
        List: false
        MetaData:
          Description: "Input parameters to the machine-learning-based load-prediction model"
        NestedAttributes:
          ElectricityPriceForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future electricity price values to consider during forecasting"
          ElectricityPriceBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past electricity price values to consider during forecasting"
          ChargingPowerForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future charging power values to consider during forecasting"
          ChargingPowerBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past charging power values to consider during forecasting"
          ElectricityConsumptionForwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of future electricity consumption values to consider during forecasting"
          ElectricityConsumptionBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past electricity consumption values to consider during forecasting"
          LoadPredictionBackwardWindow:
            AttributeType: integer
            Mandatory: true
            List: false
            MetaData:
              Description: "Number of past load values to consider during forecasting"
    Products:
      PriceForecastRequest: *ForecastClient_P_PriceForecastRequest
      Bids: *DamTrader_P_Bids
    Outputs:
      OfferedChargePriceInEURperMWH:
        MetaData:
          Description: "Maximum price in EUR per MWh willing to pay for charging electric vehicles"
      OfferedDischargePriceInEURperMWH:
        MetaData:
          Description: "Minimum Price in EUR per MWh for discharging electric vehicles"
      AwardedChargeEnergyInMWH:
        MetaData:
          Description: "Amount of energy awarded in MWh to charge electric vehicles"
      AwardedDischargeEnergyInMWH:
        MetaData:
          Description: "Amount of energy awarded in MWh to discharge electric vehicles"
      StoredEnergyInMWH:
        MetaData:
          Description: "Energy in MWh currently stored in the electric vehicles"
    MetaData:
      Description: "A Trader that sells and buys energy utilising a fleet of electric vehicles."
